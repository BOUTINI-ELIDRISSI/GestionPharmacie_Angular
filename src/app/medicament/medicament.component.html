<html>
    <head>
<!-- Bootstrap -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">

<!-- Font Awesome -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />

<title>Gestion des medicaments</title>
    </head>
    <body>
      <div class="text">Medicament</div>
       
        
          <div class="container">
            <button type="button" class="btn btn-outline-success" id="openModalBtn" (click)="openModal()"> Nouveau Medicament </button>
            <br><br>
             <!-- The Modal -->
          <div *ngIf="modalVisible" id="myModal" class="modal">
            <!-- Modal content -->
            <div class="modal-content">
              <span (click)="closeModal()" class="close">&times;</span>
              
              <nav class="navbar navbar-light justify-content-center fs-3 mb-5" style="background-color: #28b836;color: white;">
               Nouveau Medicament  
              </nav>        <hr>
                <div class="name-field">
                    <table class="tbl">
                    <tr>
                        <td>Libelle</td> &nbsp;
                        <td><input type="text" [(ngModel)]=""></td>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        <td> Email</td>&nbsp;
                        <td><input  type="text" [(ngModel)]="us.email"></td>
                    </tr>
                    <tr>
                        <td >Role</td>&nbsp;
                       <td> 
                        <select [(ngModel)]="us.role.id">
                          <option *ngFor="let role of roles" [value]="role.id">{{role.nom}}</option>
                        </select>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                      </td>
                       &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                       &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                       &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                       <td >Mot de passe</td>&nbsp;
                        <td><input type="email" [(ngModel)]="us.mot_de_passe"></td>
                    </tr>
                   
                </table>
                <br>
                <button type="button" class="btn btn-outline-success" (click)="ajouter()"> Enregistrer </button>
      
                </div>
              
            </div>
          </div>
        <!-- update Modal content -->
          <div *ngIf="modalVisible2" id="myModal2" class="modal">
            <!-- Modal content -->
            <div class="modal-content2">
              <span (click)="closeModal2()" class="close">&times;</span>
              <br><br>
              <nav class="navbar navbar-light justify-content-center fs-3 mb-5" style="background-color: #28b836;color: white;">
               Changer le role
              </nav>        <hr>
                <div class="name-field">
                    <table class="tbl">
                    <tr>
                      <td>Nom</td> &nbsp;
                        <td><input type="text" [(ngModel)]="update_user.nom" disabled></td>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        <td >Role</td>&nbsp;
                       <td> 
                        <select [(ngModel)]="update_user.role.id">
                          <option *ngFor="let role of roles" [value]="role.id">{{role.nom}}</option>
                        </select>
                       </td>
                   
                </table>
                <br>
                <button type="button" class="btn btn-outline-success" (click)="update()"> Modifier </button>
                
                </div>
              
            </div>
          </div>
          <!-- the end of update Modal content -->


        <!--  delete Modal content -->
          <div *ngIf="modalVisible3" id="myModal3" class="modal">
            <!-- Modal content -->
            <div class="modal-content3">
              <span (click)="closeModal3()" class="close">&times;</span>
              <br><br>
              
              <nav class="navbar navbar-light justify-content-center fs-3 mb-5" style="background-color: #28b836;color: white;">
               Supprimer
              </nav>        <hr>
                <div class="name-field">
                    <p>Voulez-vous vraiment supprimer l'utilisateur {{name}}</p>
                <br>
                <button type="button" class="btn btn-outline-success" (click)="delete()"> Supprimer </button>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                <button type="button" class="btn btn-outline-secondary" (click)="closeModal3()">Annuler</button>
                </div>
              
            </div>
          </div>

        <!-- the end of delete Modal content -->
          
      



            <table class="table table-hover text-center">
              <thead class="table-light">
                <tr>
                  <th scope="col">Nom</th>
                  <th scope="col">Adresse email </th>
                  <th scope="col" >Role</th>
                  <th scope="col" >Mot de passe</th>
                  <th>Details</th>
                 
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let item of users">
                  <td>{{item.nom}}</td>
                  <td>{{item.email}}</td>
                  <td>{{item.role.nom}}</td>
                  <td>{{item.mot_de_passe}}</td>
                  <td> 
                    
                    <span (click)="openModal3(item.id, item.nom)" ><img src="assets/images/delete.png" alt=""></span>
                    <span  id="openModalBtn2" (click)="openModal2(item)"><img src="assets/images/update.png" alt=""></span>

                  </td>
              </tr>
              </tbody>
            </table>
          </div>
          
        </body>
</html>
